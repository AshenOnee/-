$(document).ready(function(){$(".banner").slick({dots:!0,slidesToShow:1,slidesToScroll:1,infinite:!0,arrows:!0})}),$(document).ready(function(){var e=!1,t=!1,i=$(".menu__map"),n=$(".sub-menu");i.click(function(){t||(t=!0,(e=!e)?n.animate({bottom:0},500,function(){t=!1}):n.animate({bottom:550},500,function(){t=!1}))}),n.mouseleave(function(){e&&(t||(t=!(e=!1),n.animate({bottom:550},500,function(){t=!1})))})}),$(document).ready(function(){$(".offer-banner").slick({dots:!1,slidesToShow:1,slidesToScroll:1,autoplay:!0,infinite:!0,arrows:!1,swipe:!1,speed:3e3,fade:!0,cssEase:"linear"})}),$(document).ready(function(){var t,i,n,c,a=[$("#state-progress1"),$("#state-progress2"),$("#state-progress3"),$("#state-progress4")],s=[$("#state1"),$("#state2"),$("#state3"),$("#state4")],o=$("#dispatch-city"),r=$("#dispatch-date"),l=$("#arrival-city"),d=$("#arrival-date"),u=$("#form"),f=$("#flight-schedule"),h=$("#flight-number-edit"),p=$("#flight-number-input"),m=$("#oneway-checkbox"),e=$("#dispatch-city-select"),v=$("#arrival-city-select"),y=$("#form-submit"),g="Эконом",k=function(e){if($(a).each(function(){this.removeClass("current-state")}),a[e].addClass("current-state"),$(s).each(function(){this.hide()}),3!==e)for(var t=0;t<=e;t++)s[t].show();else s[3].show();y.hide()};function b(e){e?(h.click(function(){u.hide(),f.show(),N()}),h.removeClass("flight-number-edit-unactive"),h.addClass("flight-number-edit-active")):(h.unbind("click"),h.removeClass("flight-number-edit-active"),h.addClass("flight-number-edit-unactive")),p.val()?p.show():p.hide()}function w(){o.val()&&l.val()&&r.val()&&(m.is(":checked")||d.val())?(k(0),b(!0),p.val()&&(k(1),1<=t&&(k(2),c&&y.show()))):(b(!1),k(0))}o.keyup(function(){x("dispatch-city","dispatch-city-select")}),o.focus(function(){x("dispatch-city","dispatch-city-select"),e.show(),o.css("border-radius","10px 10px 0 0")}),o.focusout(function(){window.setTimeout(function(){e.hide(),o.css("border-radius","10px"),C("dispatch-city","dispatch-city-select")||o.val(""),p.val(""),M=void 0,I.find("input").prop("checked",!1),w()},150)}),e.find("li").not(".emptyMessage").click(function(){o.val(this.querySelector(".reservation-form__input-city-select-name").innerText),p.val(""),M=void 0,I.find("input").prop("checked",!1),w()}),l.keyup(function(){x("arrival-city","arrival-city-select")}),l.focus(function(){x("arrival-city","arrival-city-select"),v.show(),l.css("border-radius","10px 10px 0 0")}),l.focusout(function(){window.setTimeout(function(){v.hide(),l.css("border-radius","10px"),C("arrival-city","arrival-city-select")||l.val(""),p.val(""),M=void 0,I.find("input").prop("checked",!1),w()},150)}),v.find("li").not(".emptyMessage").click(function(){l.val(this.querySelector(".reservation-form__input-city-select-name").innerText),p.val(""),M=void 0,I.find("input").prop("checked",!1),w()});var x=function(e,t){for(var i=document.getElementById(e).value.toUpperCase(),n=document.getElementById(t).getElementsByTagName("li"),c=0;c<n.length;c++){var a=n[c].getElementsByClassName("reservation-form__input-city-select-name")[0];-1<(a.textContent||a.innerText).toUpperCase().indexOf(i)?n[c].style.display="":n[c].style.display="none"}},C=function(e,t){for(var i=document.getElementById(e).value.toUpperCase(),n=document.getElementById(t).getElementsByTagName("li"),c=!1,a=0;a<n.length;a++){var s=n[a].getElementsByClassName("reservation-form__input-city-select-name")[0],o=s.textContent||s.innerText;if((o=o.split("\n")[0].toUpperCase())===i){c=!0;break}}return c};$.datepicker.setDefaults($.extend($.datepicker.regional.ru)),r.datepicker({dateFormat:"d M yy",minDate:0,onSelect:function(e){d.datepicker("option","minDate",r.datepicker("getDate")),p.val(""),M=void 0,I.find("input").prop("checked",!1),w()}}),d.datepicker({dateFormat:"d M yy",minDate:0,onSelect:function(e){r.datepicker("option","maxDate",d.datepicker("getDate")),p.val(""),M=void 0,I.find("input").prop("checked",!1),w()}}),m.change(function(){$(this).is(":checked")?(r.datepicker("option","maxDate",null),d.hide()):(p.val(""),M=void 0,r.datepicker("option","maxDate",d.datepicker("getDate")),I.find("input").prop("checked",!1),d.show()),w()});var _=$("#select-adults"),T=$("#select-children"),D=$("#select-babies"),E=$("#select-class");_.selectmenu(),T.selectmenu(),D.selectmenu(),E.selectmenu(),_.on("selectmenuchange",function(){t=_.val(),w()}),T.on("selectmenuchange",function(){i=T.val()}),D.on("selectmenuchange",function(){n=D.val()}),E.on("selectmenuchange",function(){g=E.val()}),s[2].find("input").click(function(){c=$(this).attr("id"),w()});var B=$("#choose-flight-number-button-back"),S=$("#choose-flight-number-button-confirm");B.click(function(){u.show(),f.hide()});var M,I=$("#flight-schedule-table");function N(){M?(S.click(function(){u.show(),f.hide(),p.val(M),p.show(),w()}),S.removeClass("flight-schedule__confirm-unactive"),S.addClass("flight-schedule__confirm-active")):(S.unbind("click"),S.removeClass("flight-schedule__confirm-active"),S.addClass("flight-schedule__confirm-unactive"))}I.find("tbody").find("tr").not(".emptyMessage").click(function(){$(this).find("td input:radio").prop("checked",!0),M=$(this).find("td")[1].innerText,N()});var U=$("#reservation-result-message");y.click(function(){k(3);var e="Рейс №: "+p.val()+"\n";e+="Города отправки/прибытия: "+o.val()+" - "+l.val()+"\n",e+=m.is(":checked")?"Дата отправки: "+r.val()+"\n":"Дата отправки/возвращения: "+r.val()+"/"+d.val()+"\n",e+="Информация о пассажирах: "+t+" взрослых",0<i&&(e+=", "+i+" детей"),0<n&&(e+=", "+n+" младенцев"),e+="\n",e+="Класс: "+g+"\n",e+="Оплата: ","radio-card"===c&&(e+="платиковой картой"),"radio-cash"===c&&(e+="наличными"),"radio-cashless"===c&&(e+="безналичный расчет"),U.text(e)})});